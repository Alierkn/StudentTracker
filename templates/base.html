<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ã–ÄŸrenci Takip Sistemi - EducationalTR{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Toastify CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <!-- Toastify JS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-icon">ğŸ“</span>
                <span class="brand-text">
                    <span class="brand-main">EducationalTR</span>
                    <span class="brand-sub">Ã–ÄŸrenci Takip</span>
                </span>
            </div>
            {% if session.user_id %}
            <div class="nav-menu">
                <a href="{{ url_for('dashboard') }}" class="nav-link">Dashboard</a>
                <a href="{{ url_for('add_study') }}" class="nav-link">Ã‡alÄ±ÅŸma Ekle</a>
                <a href="{{ url_for('add_exam') }}" class="nav-link">SÄ±nav Ekle</a>
                <a href="{{ url_for('schedule') }}" class="nav-link">Ders ProgramÄ±</a>
                <a href="{{ url_for('leaderboard') }}" class="nav-link leaderboard-link">ğŸ† YarÄ±ÅŸma</a>
                {% if session.is_admin %}
                <a href="{{ url_for('admin_dashboard') }}" class="nav-link admin-link">Admin Panel</a>
                {% endif %}
                <div class="user-menu">
                    <span class="user-name">{{ session.full_name }}</span>
                    <a href="{{ url_for('logout') }}" class="nav-link logout-btn">Ã‡Ä±kÄ±ÅŸ</a>
                </div>
            </div>
            {% endif %}
        </div>
    </nav>

    <div class="container">
        <!-- Flash messages - Hidden, will be shown as toasts -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div id="flash-messages-data" style="display: none;">
                    {% for category, message in messages %}
                        <div data-category="{{ category }}" data-message="{{ message }}"></div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <span class="footer-icon">ğŸ“</span>
                <span class="footer-text">EducationalTR</span>
            </div>
            <p class="footer-copyright">&copy; 2024 EducationalTR - Ã–ÄŸrenci Takip Sistemi. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            <p class="footer-tagline">EÄŸitimde dijital Ã§Ã¶zÃ¼mler</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <!-- Toast Notification System -->
    <script>
        // Toast notification function
        function showToast(message, type = 'success') {
            // Color scheme based on message type
            const colors = {
                'success': {
                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                    icon: 'âœ…'
                },
                'info': {
                    background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                    icon: 'â„¹ï¸'
                },
                'warning': {
                    background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                    icon: 'âš ï¸'
                },
                'error': {
                    background: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',
                    icon: 'âŒ'
                }
            };

            const config = colors[type] || colors.success;

            Toastify({
                text: `${config.icon} ${message}`,
                duration: 4000,  // 4 seconds
                close: true,     // Show close button
                gravity: "top",  // Top position
                position: "right", // Right side
                stopOnFocus: true, // Pause on hover
                style: {
                    background: config.background,
                    borderRadius: "12px",
                    padding: "16px 24px",
                    fontSize: "15px",
                    fontWeight: "500",
                    boxShadow: "0 8px 24px rgba(0, 0, 0, 0.15)",
                    fontFamily: "'Poppins', sans-serif",
                    color: "#ffffff",
                    cursor: "pointer"
                },
                offset: {
                    y: 80 // Offset from top (below navbar)
                },
                onClick: function() {
                    // Click to dismiss
                    this.hideToast();
                }
            }).showToast();
        }

        // Display flash messages as toasts on page load
        document.addEventListener('DOMContentLoaded', function() {
            const flashContainer = document.getElementById('flash-messages-data');
            if (flashContainer) {
                const messages = flashContainer.querySelectorAll('[data-message]');
                messages.forEach((msgElement, index) => {
                    const category = msgElement.getAttribute('data-category');
                    const message = msgElement.getAttribute('data-message');

                    // Stagger toast appearance (200ms delay between each)
                    setTimeout(() => {
                        showToast(message, category);
                    }, index * 200);
                });
            }
        });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>

